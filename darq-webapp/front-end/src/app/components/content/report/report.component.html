<div style="min-height: 100%;" class="back" fxLayout="column" fxLayoutAlign="start stretch" *blockUI="'report'">
	<div style="height: 100px;"></div>
	<div fxLayout="column" fxLayoutAlign="start start" style="padding: 10px;  width: 100%; height: 100%;" *ngIf="result">
		<button class="btn btn-warning" style="cursor: pointer;" [routerLink]="['/data']" style="border-color: white;">
			<i class="fa fa-arrow-circle-left"></i> Back
		</button>
		<div class="card" style="width: 100%; margin-top: 10px; padding: 20px;">
			<h3>Data At Rest Quality Analysis Report</h3>
			<hr>
			<div fxLayout="row" fxLayoutAlign="end stretch">
				<table class="table table-sm table-bordered" style="width: 250px;">
					<tr>
						<th colspan="2" >Legend</th>
					</tr>
					<tr>
						<td style="width: 200px;">Below Threshold Area</td>
						<td style="background-color: lightgreen; width: 50px;"></td>
					</tr>
					<tr>
						<td>Below Threshold Value</td>
						<td style="background-color: blue;"></td>
					</tr>
					<tr>
						<td>Above Threshold Area</td>
						<td style="background-color: lightpink;"></td>
					</tr>
					<tr>
						<td>Above Threshold Value</td>
						<td style="background-color: #ff4d4d;"></td>
					</tr>
					<tr>
						<td>Threshold Bar</td>
						<td style="background-color: darkred;"></td>
					</tr>
				</table>
			</div>
			<table class="table table-sm table-bordered table-striped">
				<tr>
					<td>Aggregate Data File Name</td>
					<td><strong>{{result.adfName}}</strong></td>
				</tr>
				<tr>
					<td>Report Template</td>
					<td><strong>{{result.name}}</strong></td>
				</tr>
			</table>
			<p>
				{{result.description}}
			</p>
			<div *ngFor="let section of result.sections; let i=index" #show="var" [var]="true">
				<hr>
				<h4>{{i + 1}}{{'. '}}{{section.title}}
					<i matTooltip="One or more indicators above set threshold"
					   *ngIf="section.hasOverThreshold"
					   class="fa fa-exclamation-circle"
					   style="color: red; margin-left : 10px;"></i>
					<i class="fa pull-right"
					   [ngClass]="{'fa-eye-slash' : show.var, 'fa-eye' : !show.var}"
					   (click)="show.var = !show.var"
					   style="color: #0e5fc9; margin-left : 10px;"></i>
				</h4>
				<hr>
				<ng-container *ngIf="show.var"  style="background-color: #fafafb;">
					<p>{{section.description}}</p>
					<div *ngFor="let p of section.results; let j=index" style="padding-left: 40px;" #show="var" [var]="true">
						<hr>
						<h5>{{i + 1}}{{'.'}}{{j + 1}}{{'. '}} Analysis Type : {{typeName(p.type)}}
							<i matTooltip="One or more indicators above set threshold"
							   *ngIf="p.hasOverThreshold"
							   class="fa fa-exclamation-circle"
							   style="color: red; margin-left : 10px;"></i>
							<i class="fa pull-right"
							   [ngClass]="{'fa-eye-slash' : show.var, 'fa-eye' : !show.var}"
							   (click)="show.var = !show.var"
							   style="color: #0e5fc9; margin-left : 10px;"></i>
						</h5>
						<hr>
						<ng-container *ngIf="show.var"  style="background-color: #fafafb;">
							<table *ngIf="p.filters && p.filters.length > 0" class="table table-striped table-sm"
								   style="text-align: center; border-collapse : initial;
							   background-color: white;">
								<thead>
								<tr>
									<th colspan="2">Sample Selection</th>
								</tr>
								</thead>
								<tbody>
								<tr *ngFor="let f of p.filters">
									<td> {{f.field}} </td>
									<td> {{value(f.field, f.value)}} </td>
								</tr>
								</tbody>
							</table>
							<div fxLayout="row" fxLayoutAlign="start center" style="overflow-x: scroll;">
								<app-data-table [table]="p.table" [detections]="detections" [ageGroups]="ageGroups" [cvxs]="cvxs" ></app-data-table>
							</div>
						</ng-container>
					</div>
				</ng-container>
			</div>
		</div>
	</div>
</div>
